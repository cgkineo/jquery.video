(function($){$("<style>",{text:""}).appendTo("head");var t={},o="prototype",c=function(t){for(var i=1,n=arguments.length;i<n;i++){var s=arguments[i];for(var e in s)t[e]=s[e]}return t},r=function(t,i,n){var s=(n=n||0)?t.substring(n):t,e=s.match(i);return e?s.indexOf(e[0])+n:-1},s=function(t,i){setTimeout(t,i)};t.isTouchCapable=!1;var i=function(){window.removeEventListener("touchstart",i),t.isTouchCapable=!0};window.addEventListener("touchstart",i);var a={t:null,i:0,n:null,listenTo:function(t,i,n){return t.i||(t.i=++a.i),this.i||(this.i=++a.i),this.t||(this.t={}),(this.t[t.i]=t).on(i,n,this),this.t[t.id]=!0,this},listenToOnce:function(t,i,n){return t.i||(t.i=++a.i),this.i||(this.i=++a.i),this.t||(this.t={}),(this.t[t.i]=t).once(i,n,this),this.t[t.id]=!0,this},stopListening:function(t,i,n){if(t){if(i)return t.off(i,n),this;if(!this.t[t.i])return;this.t[t.i].off(i,n,this)}else{if(!this.t)return;for(var s in this.t)this.t[s].off(i,n,this)}},on:function(t,i,n){switch(this.i||(this.i=++a.i),typeof t){case"string":var s=t.split(" ");if(1<s.length)return s.forEach(function(t){this.on(t,i,n)}.bind(this)),this;break;case"object":for(var e in t)this.on(e,t[e],n||i);return this}return this.n=this.n||{},this.n[t]=this.n[t]||[],this.n[t].push({subject:n||this,callback:i,once:!1}),this},once:function(t,i,n){switch(this.i||(this.i=++a.i),typeof t){case"string":var s=t.split(" ");if(1<s.length)return s.forEach(function(t){this.once(t,i,n)}.bind(this)),this;break;case"object":for(var e in t)this.on(e,t[e],n||i);return this}return this.n=this.n||{},this.n[t]=this.n[t]||[],this.n[t].push({subject:n||this,callback:i,once:!0}),this},off:function(t,i,n){switch(this.i||(this.i=++a.i),typeof t){case"string":var s=t.split(" ");if(1<s.length)return s.forEach(function(t){this.off(t,i,n)}.bind(this)),this;break;case"object":for(var e in t)this.off(e,t[e],n);return this}if(!t)return this.n=null,this;if(!this.n)return this;if(!this.n[t])return this;for(var r=this.n[t].length-1;-1<r;r--)i&&this.n[t][r].callback!==i||n&&this.n[t][r].subject!==n||this.n[t].splice(0,r);return this.n[t].length||delete this.n[t],this},trigger:function(t){if(this.i||(this.i=++a.i),!t)return this;if(!this.n)return this;if(this.n[t]){for(var i,n=(i=arguments,1,Array[o].slice.call(i,1)),s=[],e=0,r=this.n[t].length;e<r;e++){var h=this.n[t][e];h.callback.apply(h.subject,n),h.once&&s.unshift(e)}for(e=0,r=s.length;e<r;e++)this.n[t].splice(s[e],1);this.n[t].length||delete this.n[t]}},destroy:function(){this.off()}},e=function(t){var i={};if(t.$set)for(var n in t.$set)i[n]=i[n]||{},i[n].set=t.$set[n];if(t.$get)for(var n in t.$set)i[n]=i[n]||{},i[n].get=t.$set[n];return Object.defineProperties(t,i),t},n=function(t,i){var n=t.constructor===Object?function(){}:t.constructor;return c(n[o],a,t||{}),c(n,a,i||{}),e(n[o]),e(n),n},u=n({id:null,selector:null,el:null,options:null,domEvents:["loadstart","process","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange","resize"],constructor:function t(i,n){this.id=++t.s,this.e(i),this.options=n||{},this.r=this.r.bind(this),t.players.push(this),t.trigger("create",this),this.h(),s(function(){t.trigger("created",this)}.bind(this),1)},e:function(t){switch(typeof t){case"string":this.el=window.document.querySelector(t);break;case"object":this.el=t}this.selector=t,this.el[u.o]=this},h:function(){for(var t=0,i=this.domEvents.length;t<i;t++)this.el.addEventListener(this.domEvents[t],this.r)},r:function(t){this.trigger("*",t),this.trigger(t.type,t),u.trigger(t.type,this,t)},destroy:function(){u.trigger("destroy",this);for(var t=u.players.length-1;-1<t;t--)u.players[t]===this&&u.players.splice(t,1);this.a(),this.id=null,this.selector=null,this.el=null,this.options=null,s(function(){u.trigger("destroyed",this)}.bind(this),1)},a:function(){for(var t=0,i=this.domEvents.length;t<i;t++)this.el.removeEventListener(this.domEvents[t],this.r);this.stopListening(),this.off()}},{s:0,o:"player",players:[]});window.Video=u;var h=n({floorPrecision:10,constructor:function(){this.listenTo(u,{play:this.onPlay,pause:this.onPause,ended:this.onEnded})},onPlay:function(t){t.c=!1},onPause:function(t){this.isEnded(t)&&!t.c&&setTimeout(function(){t.el&&(t.c||this.isEnded(t)&&t.el.dispatchEvent(new Event("ended")))}.bind(this),150)},onEnded:function(t){t.c=!0},isEnded:function(t){return Math.abs(Math.floor(t.el.currentTime*this.floorPrecision)-Math.floor(t.el.duration*this.floorPrecision))<=1}});u.ended=new h;var f=n({playing:null,interval:62.5,isRaf:!1,lastTickTime:null,constructor:function(){this.playing=[],this.listenTo(u,{play:this.onPlay,"pause finish destroyed":this.onPause}),this.onRaf=this.onRaf.bind(this)},onPlay:function(t){this.playing.push(t),this.inRaf||(this.rAF(this.onRaf),this.inRaf=!0)},rAF:function(t){return window.requestAnimationFrame(t)},onRaf:function(){if(Date.now()<this.lastTickTime+this.interval)return this.playing.length?this.rAF(this.onRaf):this.inRaf=!1;for(var t=0,i=this.playing.length;t<i;t++){var n=new Event("timeupdate");n.realtime=!0,this.playing[t].el.dispatchEvent(n)}return this.rAF(this.onRaf)},onPause:function(t){for(var i=0,n=this.playing.length;i<n;i++)this.playing[i].id===t.id&&this.playing.splice(i,1)}});u.timeupdate=new f,$&&$.fn&&($.fn.videos=function(n){var t=this.find("video");switch(t=t.add(this.filter("video")),n){case"destroy":return t.each(function(t,i){i[u.o]instanceof u&&(i[u.o].destroy(),delete i[u.o])}),t}return t.each(function(t,i){i[u.o]||new u(i,n)}),t},$.fn.play=function(){var t=this.find("video");(t=t.add(this.filter("video"))).each(function(t,i){"VIDEO"===i.tagName&&i.play()})},$.fn.pause=function(){var t=this.find("video");(t=t.add(this.filter("video"))).each(function(t,i){"VIDEO"===i.tagName&&i.pause()})});var l=n({video:null,languages:null,defaultLang:null,constructor:function(t){this.video=t,this.getLangs(this.onCaptionsLoaded.bind(this)),this.listenTo(this.video,{timeupdate:this.onTimeUpdate,destroyed:this.onDestroyed}),this.onTimeUpdate()},onCaptionsLoaded:function(t){for(var i in this.languages=t,this.defaultLang=null,t)if(this.languages[i].default){this.defaultLang=this.languages[i];break}},onTimeUpdate:function(t){if((!t||!t.realtime)&&this.languages){var i=this.video.el.currentTime,n={},s=0,e=u.dom.fetch(this.video);if(e.captions&&e.captions.forEach(function(t){var i=t.getAttribute("srclang");this.languages[i]&&(n[i]||(n[i]=[],s++),n[i].push(t))}.bind(this)),s)for(var h in n){var r=n[h],o=this.languages[h],a=o.u.filter(function(t){return t.start<=i&&t.end>=i&&!t.live}),c=o.u.filter(function(t){return(t.start>i||t.end<i)&&t.live});if(0===a.length&&0===c.length)return;r.forEach(function(r){a.forEach(function(t){t.live=!0;var i=this.renderCuePlacement({id:t.id,lang:h,class:"cue"},t),n=document.createElement("span");for(var s in i)n.setAttribute(s,i[s]);var e=document.createElement("span");for(var s in cueAttributes={class:"cue-text",html:t.lines.join("<br>")},cueAttributes)"html"!==s?e.setAttribute(s,cueAttributes[s]):e.innerHTML=cueAttributes[s];n.appendChild(e),r.appendChild(n)}.bind(this)),c.forEach(function(t){t.live=!1,r.querySelectorAll("#"+t.id+".cue").forEach(function(t){t.remove()})}),r.querySelectorAll(".cue:not([lang="+h+"])").forEach(function(t){t.remove()})}.bind(this))}}},renderCuePlacement:function(t,i){var n=t.class.split(" ");n.push(i.placement.vertical);var s="",e=i.placement;switch(e.vertical){case"horizontal":switch(e.align){case"start":n.push("align-left");break;case"middle":n.push("align-center");break;case"end":n.push("align-right")}s+="width:"+e.size+";",s+="left:"+e.position+";",-1<String(e.line).indexOf("%")||0<=e.line?(e.line,s+="top:"+e.line+"%"):s+="bottom:"+(100-100*Math.abs(e.line))+"%";break;case"rl":switch(e.align){case"start":n.push("align-top");break;case"middle":n.push("align-middle");break;case"end":n.push("align-bottom")}s+="height:"+e.size+";",s+="top:"+e.position+";",-1<String(e.line).indexOf("%")||0<=e.line?(e.line,s+="left:"+e.line+"%"):s+="right:"+(100-100*Math.abs(e.line))+"%";break;case"lr":switch(e.align){case"start":n.push("align-top");break;case"middle":n.push("align-middle");break;case"end":n.push("align-bottom")}s+="height:"+e.size+";",s+="top:"+e.position+";",-1<String(e.line).indexOf("%")||0<=e.line?(e.line,s+="right:"+e.line+"%"):s+="left:"+(100-100*Math.abs(e.line))+"%"}return t.class=n.join(" "),t.style=s,t},getLangs:function(i){if("function"!=typeof i&&(i=null),this.languages)return i(this.languages);var n=0,s=0;function e(t){t.isReady()?n++:(s--,delete r[t.lang]),n===s&&i&&i(r)}var r={};return this.video.el.querySelectorAll("track[type='text/vtt']").forEach(function(t){var i=t.getAttribute("srclang"),n=t.getAttribute("src");if(i&&n){if(r[i])return;s++,r[i]=new p({default:void 0!==t.getAttribute("default"),lang:i,src:n,label:t.getAttribute("label")},e)}t.remove()}),r},onDestroyed:function(){}});u.Captions=l;var d=n({constructor:function(){this.listenTo(u,{create:this.onCreate})},onCreate:function(t){new u.Captions(t)}});u.captions=new d;var v=n({f:null,l:null,constructor:function(){this.f=[],this.l={},this.listenTo(u,{create:this.d,destroyed:this.v}),this.refresh=this.refresh.bind(this),document.body?s(this.refresh,1):document.addEventListener("load",this.refresh)},d:function(t){this.f.push(t),this.refresh()},v:function(t){for(var i=0,n=this.f.length;i<n;i++)this.f[i].id===t.id&&this.f.splice(i,1);this.refresh()},refresh:function(){var t=this.p([document.body],"[for][kind]");t=this.g(t),this.l=this.m(t)},fetch:function(t){var i=t.el.id;return this.l[i]||{}},p:function(t,i){for(var n=[],s=0,e=t.length;s<e;s++)for(var r=t[s].querySelectorAll(i),h=0,o=r.length;h<o;h++)n.push(r[h]);return n},g:function(t){var i=[],n=this.w();if(!n)return i;if(!t.length)return i;for(var s=0,e=t.length;s<e;s++){var r=t[s];n[r.getAttribute("for")]&&i.push(r)}return i},w:function(){for(var t={},i=0,n=this.f.length;i<n;i++)t[this.f[i].el.id]=!0;return this.f.length?t:null},m:function(t){for(var i={},n=0,s=t.length;n<s;n++){var e=t[n],r=e.getAttribute("for");i[r]=i[r]||{},e.getAttribute("kind").split(" ").forEach(function(t){i[r][t]=i[r][t]||[],i[r][t].push(e)})}return i}});u.dom=new v;var p=n({u:null,b:null,y:!1,k:!1,default:null,label:null,lang:null,src:null,constructor:function(t,i){c(this,t),this._(i)},_:function(i){$.ajax({url:this.src,dataType:"text",success:function(t){this.T(t),this.E=!1,this.y=!0,i&&i(this)}.bind(this),error:function(t){this.E=t,this.y=!0,i&&i(this)}.bind(this)})},isReady:function(){return this.y&&!this.E},T:function(t){var i=-1<t.indexOf("\r\n")?"\r\n":"\n",n=t.split(i);this.u=[],this.b=[];for(var s=[],e=0,r=n.length;e<r;e++){var h=n[e],o=e===n.length-1,a=!h;if(o&&!a&&s.push(h),(o||a)&&s.length){if(-1<s[0].toLowerCase().indexOf("webvtt")&&(s.splice(0,1),!s.length))continue;this.u.push({id:"c"+ ++p.z,title:"",start:null,end:null,placement:null,lines:s}),s=[]}else a||s.push(h)}this.u=this.u.filter(function(t){if(0!==t.lines[0].indexOf("NOTE")){if(0===t.lines[0].indexOf("STYLE"))return t.lines.splice(0,1),void this.b.push(t.lines.join("\n"));if(-1===t.lines[0].indexOf("--\x3e")&&(t.title=t.lines[0],t.lines.shift()),-1===t.lines[0].indexOf("--\x3e"))throw"Error";return c(t,this.M(t.lines[0])),t.lines.shift(),!0}}.bind(this))},M:function(t){if(t=t.trim(),-1===(n=r(t,/-->/)))throw"Time declaration error, no --\x3e";var i=t.slice(0,n).trim();t=t.slice(n);var n,s=r(t,/[0-9]+/);if(-1===s)throw"Time declaration error, no end time";t=t.slice(s),-1===(n=r(t,/[ ]{1}/))&&(n=t.length);var e=t.slice(0,n).trim();return t=t.slice(n),{start:this.j(i),end:this.j(e),placement:this.C(t)}},D:[.001,1,60,360],j:function(t){var i=t.split(/[\:\.\,]{1}/g).reverse();if(i.length<3)throw"Time declaration error, mm:ss.ttt or hh:mm:ss.tt";for(var n=0,s=0,e=i.length;s<e;s++)n+=this.D[s]*parseInt(i[s]);return n},C:function(t){var i=t.split(" ").filter(function(t){return t}),e={line:-1,position:"50%",size:"100%",align:"middle"};for(var n in i.forEach(function(t){var i=t.split(":"),n=i[1].split(","),s=i[0].toLowerCase();switch(s){case"d":s="vertical";break;case"l":s="line";break;case"t":s="position";break;case"s":s="size";break;case"a":s="align";break;case"vertical":case"line":case"position":case"size":case"align":break;default:throw"Bad position declaration, "+s}e[s]=n[0]||e[s]}),e.vertical="vertical"===e.vertical?"rl":"vertical-lr"===e.vertical?"lr":"horizontal",e){var s=e[n];switch(n){case"line":s=String(s||-1);break;case"position":s=String(s||"0%");break;case"size":s=String(s||"100%");break;case"align":switch(s=String(s||"middle")){case"start":case"middle":case"end":break;default:throw"Invalid align declaration"}}}return e}},{z:0});u.Lang=p;var g=n({video:null,constructor:function(t){this.video=t,this.listenTo(t,{timeupdate:this.onTimeUpdate,destroyed:this.onDestroyed}),this.onTimeUpdate()},onTimeUpdate:function(){var t=u.dom.fetch(this.video);if(t.rail)for(var i=t.rail,n=0,s=i.length;n<s;n++){var e=i[n],r=this.video.el.currentTime/this.video.el.duration;e.style.width=100*r+"%"}},onDestroyed:function(){}});u.Rail=g;var m=n({constructor:function(){this.listenTo(u,{create:this.onCreate})},onCreate:function(t){new u.Rail(t)}});u.rail=new m;var w=n({video:null,constructor:function(t){this.video=t,this.listenTo(t,{resize:this.onResize,destroyed:this.onDestroyed}),this.attachEventListeners(),this.onResize()},attachEventListeners:function(){this.onResize=this.onResize.bind(this)},onResize:function(){var t=this.video.el.getAttribute("size")||"";switch(t=(t=(t=(t=t.trim()).replace(/\:/g," ")).replace(/\//g," ")).replace(/\*/g,"")){case"contain":case"cover":break;default:var i=t.split(" ");""===i[0]||void 0===i[0]||i[0],""===i[1]||void 0===i[1]||i[1]}},onDestroyed:function(){}});u.Ratio=w;var b=n({constructor:function(){this.listenTo(u,{create:this.onCreate})},onCreate:function(t){new u.Ratio(t)}});u.ratio=new b;var y=n({floorPrecision:10,video:null,constructor:function(t){this.video=t,this.listenTo(t,{timeupdate:this.onTimeUpdate,destroyed:this.onDestroyed}),this.onTimeUpdate()},onTimeUpdate:function(){var t=u.dom.fetch(this.video);if(t.state)for(var i=t.state,n=this.isAtStart(),s=this.isAtEnd(),e=this.video.el.paused,r=0,h=i.length;r<h;r++){var o=i[r];E(o,"is-playing",!e),E(o,"is-paused",e),E(o,"is-start",n),E(o,"is-end",s),E(o,"is-middle",!s&&!n)}},isAtStart:function(){var t=this.video.el.currentTime;return Math.floor(t*this.floorPrecision)<=1},isAtEnd:function(){var t=this.video.el.currentTime,i=this.video.el.duration;return Math.abs(Math.floor(t*this.floorPrecision)-Math.floor(i*this.floorPrecision))<=1},onDestroyed:function(){}});u.State=y;var k=n({constructor:function(){this.listenTo(u,{create:this.onCreate})},onCreate:function(t){new u.State(t)}});u.state=new k;var _=n({video:null,constructor:function(t){this.video=t,this.listenTo(t,{"pause play":this.onUpdate}),this.attachEventListeners(),this.onUpdate()},attachEventListeners:function(){this.onClick=this.onClick.bind(this);var t=u.dom.fetch(this.video);t.toggle&&t.toggle.forEach(function(t){t.removeEventListener("click",this.onClick),t.addEventListener("click",this.onClick)}.bind(this))},onUpdate:function(){var t=u.dom.fetch(this.video),i=this.video.el.paused;t.toggle&&t.toggle.forEach(function(t){E(t,"should-play",i),E(t,"should-pause",!i)})},onClick:function(){this.video.el.paused?this.video.el.play():this.video.el.pause(),this.onUpdate()},onDestroyed:function(){var t=u.dom.fetch(this.video);t.toggle&&t.toggle.forEach(function(t){t.removeEventListener("click",this.onClick),t.addEventListener("click",this.onClick)}.bind(this))}});u.Toggle=_;var T=n({constructor:function(){this.listenTo(u,{create:this.onCreate})},onCreate:function(t){new u.Toggle(t)}});u.toggle=new T;var E=function(t,i,n){switch(typeof i){case"string":i=i.split(" ")}n=void 0===n||n;for(var s=t.classList,e=0,r=i.length;e<r;e++){for(var h=i[e],o=!1,a=0,c=s.length;a<c;a++)s[a]===h&&(o=!0);!o&&n?s.add(h):o&&!n&&s.remove(h)}};e=function(t){var i={};if(t.$set)for(var n in t.$set)i[n]=i[n]||{},i[n].set=t.$set[n];if(t.$get)for(var n in t.$set)i[n]=i[n]||{},i[n].get=t.$set[n];return Object.defineProperties(t,i),t},r=function(t,i,n){var s=(n=n||0)?t.substring(n):t,e=s.match(i);return e?s.indexOf(e[0])+n:-1};})(jQuery);