(function($){$("<style>",{text:""}).appendTo("head");var t={isTouchCapable:!1},s=function(t,i){setTimeout(t,i)},r=function(t,i,n){var s=(n=n||0)?t.substring(n):t,e=s.match(i);return e?s.indexOf(e[0])+n:-1},c=function(t){for(var i=1,n=arguments.length;i<n;i++){var s=arguments[i];for(var e in s)t[e]=s[e]}return t};t.isTouchCapable=!1;var i=function(){window.removeEventListener("touchstart",i),t.isTouchCapable=!0};window.addEventListener("touchstart",i);var a={t:null,i:0,n:null,listenTo:function(t,i,n){return t.i||(t.i=++a.i),this.i||(this.i=++a.i),this.t||(this.t={}),(this.t[t.i]=t).on(i,n,this),this.t[t.id]=!0,this},listenToOnce:function(t,i,n){return t.i||(t.i=++a.i),this.i||(this.i=++a.i),this.t||(this.t={}),(this.t[t.i]=t).once(i,n,this),this.t[t.id]=!0,this},stopListening:function(t,i,n){if(t){if(i)return t.off(i,n),this;if(!this.t[t.i])return;this.t[t.i].off(i,n,this)}else{if(!this.t)return;for(var s in this.t)this.t[s].off(i,n,this)}},on:function(t,i,n){switch(this.i||(this.i=++a.i),typeof t){case"string":var s=t.split(" ");if(1<s.length)return s.forEach(function(t){this.on(t,i,n)}.bind(this)),this;break;case"object":for(var e in t)this.on(e,t[e],n||i);return this}return this.n=this.n||{},this.n[t]=this.n[t]||[],this.n[t].push({subject:n||this,callback:i,once:!1}),this},once:function(t,i,n){switch(this.i||(this.i=++a.i),typeof t){case"string":var s=t.split(" ");if(1<s.length)return s.forEach(function(t){this.once(t,i,n)}.bind(this)),this;break;case"object":for(var e in t)this.on(e,t[e],n||i);return this}return this.n=this.n||{},this.n[t]=this.n[t]||[],this.n[t].push({subject:n||this,callback:i,once:!0}),this},off:function(t,i,n){switch(this.i||(this.i=++a.i),typeof t){case"string":var s=t.split(" ");if(1<s.length)return s.forEach(function(t){this.off(t,i,n)}.bind(this)),this;break;case"object":for(var e in t)this.off(e,t[e],n);return this}if(!t)return this.n=null,this;if(!this.n)return this;if(!this.n[t])return this;for(var r=this.n[t].length-1;-1<r;r--)i&&this.n[t][r].callback!==i||n&&this.n[t][r].subject!==n||this.n[t].splice(0,r);return this.n[t].length||delete this.n[t],this},trigger:function(t){if(this.i||(this.i=++a.i),!t)return this;if(!this.n)return this;if(this.n[t]){for(var i,n=(i=arguments,1,Array.prototype.slice.call(i,1)),s=[],e=0,r=this.n[t].length;e<r;e++){var h=this.n[t][e];h.callback.apply(h.subject,n),h.once&&s.unshift(e)}for(e=0,r=s.length;e<r;e++)this.n[t].splice(s[e],1);this.n[t].length||delete this.n[t]}},destroy:function(){this.off()}},e=function(t){var i={};if(t.$set)for(var n in t.$set)i[n]=i[n]||{},i[n].set=t.$set[n];if(t.$get)for(var n in t.$set)i[n]=i[n]||{},i[n].get=t.$set[n];Object.defineProperties(t,i)},n=function(t,i){var n=t.constructor===Object?function(){}:t.constructor;return c(n.prototype,a,t||{}),c(n,a,i||{}),e(n.prototype),e(n),n},u=n({id:null,selector:null,el:null,options:null,domEvents:["loadstart","process","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"],constructor:function t(i,n){this.id=++t.s,this.e(i),this.options=n||{},this.r=this.r.bind(this),t.players.push(this),t.trigger("create",this),this.h(),s(function(){t.trigger("created",this)}.bind(this),1)},e:function(t){switch(typeof t){case"string":this.el=window.document.querySelector(t);break;case"object":this.el=t}this.selector=t,this.el[u.a]=this},h:function(){for(var t=0,i=this.domEvents.length;t<i;t++)this.el.addEventListener(this.domEvents[t],this.r)},r:function(t){this.trigger("*",t),this.trigger(t.type,t),u.trigger(t.type,this,t)},destroy:function(){u.trigger("destroy",this);for(var t=u.players.length-1;-1<t;t--)u.players[t]===this&&u.players.splice(t,1);this.o(),this.id=null,this.selector=null,this.el=null,this.options=null,s(function(){u.trigger("destroyed",this)}.bind(this),1)},o:function(){for(var t=0,i=this.domEvents.length;t<i;t++)this.el.removeEventListener(this.domEvents[t],this.r);this.stopListening(),this.off()}},{s:0,a:"player",players:[]});window.Video=u;var h=n({floorPrecision:10,constructor:function(){this.listenTo(u,{ended:this.onEnded,play:this.onPlay,pause:this.onPause})},onPlay:function(t){t.hasEnded=!1},onPause:function(t){this.isEnded(t)&&!t.hasEnded&&setTimeout(function(){t.el&&(t.hasEnded||this.isEnded(t)&&t.el.dispatchEvent(new Event("ended")))}.bind(this),150)},onEnded:function(t){t.hasEnded=!0},isEnded:function(t){return Math.abs(Math.floor(t.el.currentTime*this.floorPrecision)-Math.floor(t.el.duration*this.floorPrecision))<=1}});u.fixended=new h;var o=function(t){return window.requestAnimationFrame(t)},l=n({playing:null,interval:62.5,isRaf:!1,lastTickTime:null,constructor:function(){this.playing=[],this.listenTo(u,{play:this.onPlay,"pause finish destroyed":this.onPause}),this.onRaf=this.onRaf.bind(this)},onPlay:function(t){this.playing.push(t),this.inRaf||(o(this.onRaf),this.inRaf=!0)},onRaf:function(){if(Date.now()<this.lastTickTime+this.interval)return this.playing.length?o(this.onRaf):this.inRaf=!1;for(var t=0,i=this.playing.length;t<i;t++){var n=new Event("timeupdate");n.realtime=!0,this.playing[t].el.dispatchEvent(n)}return o(this.onRaf)},onPause:function(t){for(var i=0,n=this.playing.length;i<n;i++)this.playing[i].id===t.id&&this.playing.splice(i,1)}});u.realtime=new l,$&&$.fn&&($.fn.videos=function(n){var t=this.find("video");switch(t=t.add(this.filter("video")),n){case"destroy":return t.each(function(t,i){i[u.a]instanceof u&&(i[u.a].destroy(),delete i[u.a])}),t}return t.each(function(t,i){i[u.a]||new u(i,n)}),t});var f=n({constructor:function(){this.listenTo(u,{create:this.onCreate})},onCreate:function(t){new d(t)}}),d=n({video:null,languages:null,defaultLang:null,constructor:function(t){this.video=t,this.getLangs(this.onCaptionsLoaded.bind(this)),this.listenTo(this.video,{timeupdate:this.onTimeUpdate})},onCaptionsLoaded:function(t){for(var i in this.languages=t,this.defaultLang=null,t)if(this.languages[i].default){this.defaultLang=this.languages[i];break}},onTimeUpdate:function(t){if(!t.realtime&&this.languages){var i=this.video.el.currentTime,n={},s=0,e=u.dom.fetch(this.video);if(e.captions&&e.captions.forEach(function(t){var i=t.getAttribute("srclang");this.languages[i]&&(n[i]||(n[i]=[],s++),n[i].push(t))}.bind(this)),s)for(var h in n){var r=n[h],a=this.languages[h],o=a.c.filter(function(t){return t.start<=i&&t.end>=i&&!t.live}),c=a.c.filter(function(t){return(t.start>i||t.end<i)&&t.live});if(0===o.length&&0===c.length)return;r.forEach(function(r){o.forEach(function(t){t.live=!0;var i=this.renderCuePlacement({id:t.id,lang:h,class:"cue"},t),n=document.createElement("span");for(var s in i)n.setAttribute(s,i[s]);var e=document.createElement("span");for(var s in cueAttributes={class:"cue-text",html:t.lines.join("<br>")},cueAttributes)"html"!==s?e.setAttribute(s,cueAttributes[s]):e.innerHTML=cueAttributes[s];n.appendChild(e),r.appendChild(n)}.bind(this)),c.forEach(function(t){t.live=!1,r.querySelectorAll("#"+t.id+".cue").forEach(function(t){t.remove()})}),r.querySelectorAll(".cue:not([lang="+h+"])").forEach(function(t){t.remove()})}.bind(this))}}},renderCuePlacement:function(t,i){var n=t.class.split(" ");n.push(i.placement.vertical);var s="",e=i.placement;switch(e.vertical){case"horizontal":switch(e.align){case"start":n.push("align-left");break;case"middle":n.push("align-center");break;case"end":n.push("align-right")}s+="width:"+e.size+";",s+="left:"+e.position+";",-1<String(e.line).indexOf("%")||0<=e.line?(e.line,s+="top:"+e.line+"%"):s+="bottom:"+(100-100*Math.abs(e.line))+"%";break;case"rl":switch(e.align){case"start":n.push("align-top");break;case"middle":n.push("align-middle");break;case"end":n.push("align-bottom")}s+="height:"+e.size+";",s+="top:"+e.position+";",-1<String(e.line).indexOf("%")||0<=e.line?(e.line,s+="left:"+e.line+"%"):s+="right:"+(100-100*Math.abs(e.line))+"%";break;case"lr":switch(e.align){case"start":n.push("align-top");break;case"middle":n.push("align-middle");break;case"end":n.push("align-bottom")}s+="height:"+e.size+";",s+="top:"+e.position+";",-1<String(e.line).indexOf("%")||0<=e.line?(e.line,s+="right:"+e.line+"%"):s+="left:"+(100-100*Math.abs(e.line))+"%"}return t.class=n.join(" "),t.style=s,t},getLangs:function(i){if("function"!=typeof i&&(i=null),this.languages)return i(this.languages);var n=0,s=0;function e(t){t.isReady()?n++:(s--,delete r[t.lang]),n===s&&i&&i(r)}var r={};return this.video.el.querySelectorAll("track[type='text/vtt']").forEach(function(t){var i=t.getAttribute("srclang"),n=t.getAttribute("src");if(i&&n){if(r[i])return;s++,r[i]=new g({default:void 0!==t.getAttribute("default"),lang:i,src:n,label:t.getAttribute("label")},e)}t.remove()}),r}});u.captions=new f;var v=n({u:null,elements:null,constructor:function(){this.u=[],this.elements={},this.listenTo(u,{created:this.l,destroyed:this.f}),this.refresh=this.refresh.bind(this),document.body?s(this.refresh,1):document.addEventListener("load",this.refresh)},l:function(t){this.u.push(t),this.refresh()},f:function(t){for(var i=0,n=this.u.length;i<n;i++)this.u[i].id===t.id&&this.u.splice(i,1);this.refresh()},refresh:function(){var t=this.d([document.body],"[for][kind]");t=this.v(t),this.elements=this.g(t)},fetch:function(t){var i=t.el.id;return this.elements[i]||[]},d:function(t,i){for(var n=[],s=0,e=t.length;s<e;s++)for(var r=t[s].querySelectorAll(i),h=0,a=r.length;h<a;h++)n.push(r[h]);return n},v:function(t){var i=[],n=this.p();if(!n)return i;if(!t.length)return i;for(var s=0,e=t.length;s<e;s++){var r=t[s];n[r.getAttribute("for")]&&i.push(r)}return i},p:function(){for(var t={},i=0,n=this.u.length;i<n;i++)t[this.u[i].el.id]=!0;return this.u.length?t:null},g:function(t){for(var i={},n=0,s=t.length;n<s;n++){var e=t[n],r=e.getAttribute("for");i[r]=i[r]||{},e.getAttribute("kind").split(" ").forEach(function(t){i[r][t]=i[r][t]||[],i[r][t].push(e)})}return i}});u.dom=new v;var g=n({c:null,m:null,b:!1,w:!1,default:null,label:null,lang:null,src:null,constructor:function(t,i){c(this,t),this.y(i)},y:function(i){$.ajax({url:this.src,dataType:"text",success:function(t){this.k(t),this._=!1,this.b=!0,i&&i(this)}.bind(this),error:function(t){this._=t,this.b=!0,i&&i(this)}.bind(this)})},isReady:function(){return this.b&&!this._},k:function(t){var i=-1<t.indexOf("\r\n")?"\r\n":"\n",n=t.split(i);this.c=[],this.m=[];for(var s=[],e=0,r=n.length;e<r;e++){var h=n[e],a=e===n.length-1,o=!h;if(a&&!o&&s.push(h),(a||o)&&s.length){if(-1<s[0].toLowerCase().indexOf("webvtt")&&(s.splice(0,1),!s.length))continue;this.c.push({id:"c"+ ++g.T,title:"",start:null,end:null,placement:null,lines:s}),s=[]}else o||s.push(h)}this.c=this.c.filter(function(t){if(0!==t.lines[0].indexOf("NOTE")){if(0===t.lines[0].indexOf("STYLE"))return t.lines.splice(0,1),void this.m.push(t.lines.join("\n"));if(-1===t.lines[0].indexOf("--\x3e")&&(t.title=t.lines[0],t.lines.shift()),-1===t.lines[0].indexOf("--\x3e"))throw"Error";return c(t,this.E(t.lines[0])),t.lines.shift(),!0}}.bind(this))},E:function(t){if(t=t.trim(),-1===(n=r(t,/-->/)))throw"Time declaration error, no --\x3e";var i=t.slice(0,n).trim();t=t.slice(n);var n,s=r(t,/[0-9]+/);if(-1===s)throw"Time declaration error, no end time";t=t.slice(s),-1===(n=r(t,/[ ]{1}/))&&(n=t.length);var e=t.slice(0,n).trim();return t=t.slice(n),{start:this.j(i),end:this.j(e),placement:this.x(t)}},P:[.001,1,60,360],j:function(t){var i=t.split(/[\:\.\,]{1}/g).reverse();if(i.length<3)throw"Time declaration error, mm:ss.ttt or hh:mm:ss.tt";for(var n=0,s=0,e=i.length;s<e;s++)n+=this.P[s]*parseInt(i[s]);return n},x:function(t){var i=t.split(" ").filter(function(t){return t}),e={line:-1,position:"50%",size:"100%",align:"middle"};for(var n in i.forEach(function(t){var i=t.split(":"),n=i[1].split(","),s=i[0].toLowerCase();switch(s){case"d":s="vertical";break;case"l":s="line";break;case"t":s="position";break;case"s":s="size";break;case"a":s="align";break;case"vertical":case"line":case"position":case"size":case"align":break;default:throw"Bad position declaration, "+s}e[s]=n[0]||e[s]}),e.vertical="vertical"===e.vertical?"rl":"vertical-lr"===e.vertical?"lr":"horizontal",e){var s=e[n];switch(n){case"line":s=String(s||-1);break;case"position":s=String(s||"0%");break;case"size":s=String(s||"100%");break;case"align":switch(s=String(s||"middle")){case"start":case"middle":case"end":break;default:throw"Invalid align declaration"}}}return e}},{T:0}),p=n({constructor:function(){this.listenTo(u,{create:this.onCreate})},onCreate:function(t){new m(t)}}),m=n({video:null,constructor:function(t){this.video=t,this.listenTo(t,{timeupdate:this.onTimeUpdate,destroy:this.destroy()})},onTimeUpdate:function(){var t=this.video.el.id;if(u.dom.elements[t]&&u.dom.elements[t].rail)for(var i=u.dom.elements[t].rail,n=0,s=i.length;n<s;n++){var e=i[n],r=this.video.el.currentTime/this.video.el.duration;e.style.width=100*r+"%"}}});u.rail=new p,e=function(t){var i={};if(t.$set)for(var n in t.$set)i[n]=i[n]||{},i[n].set=t.$set[n];if(t.$get)for(var n in t.$set)i[n]=i[n]||{},i[n].get=t.$set[n];Object.defineProperties(t,i)};})(jQuery);