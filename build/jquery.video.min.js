(function($){function t(t,s){i(this,t),this.t(s)}$("<style>",{text:"[for][kind=buffering]{position:absolute;top:0;left:0;bottom:0;right:0;font-size:22px;font-family:sans-serif;line-height:120%;}[for][kind=buffering]{display:none;}[for][kind=buffering].buffering{display:block;}[for][kind=captions]{position:absolute;top:0;left:0;bottom:0;right:0;font-size:22px;font-family:sans-serif;line-height:120%;}[for][kind=captions] .cue{position:absolute;font-size:100%;line-height:120%;}[for][kind=captions] .cue .cue-text{background-color:black;color:white;padding:0.2%;}[for][kind=captions] .cue.horizontal{transform:translateX(-50%);}[for][kind=captions] .cue.lr{transform:translateY(-50%);}[for][kind=captions] .cue.rl{transform:translateY(-50%);}[for][kind=captions] .cue.align-left{text-align:left;}[for][kind=captions] .cue.align-right{text-align:right;}[for][kind=captions] .cue.align-center{text-align:center;}[for][kind=captions] .cue.align-top{text-align:left;}[for][kind=captions] .cue.align-middle{text-align:right;}[for][kind=captions] .cue.align-bottom{text-align:center;}[for][kind=controls]{position:absolute;top:0;left:0;bottom:0;right:0;font-size:22px;font-family:sans-serif;line-height:120%;}[for][kind=controls].playing .big-play{display:none;}[for][kind=poster]{position:absolute;top:0;left:0;bottom:0;right:0;font-size:22px;font-family:sans-serif;line-height:120%;}[for][kind=poster].playing img{display:none;}"}).appendTo("head");var i=$.extend,s="prototype";$.indexOfRegex=function(t,i,s){var n=(s=s||0)?t.substring(s):t,e=n.match(i);return e?n.indexOf(e[0])+s:-1},$.lastIndexOfRegex=function(t,i,s){var n=(s=s||0)?t.substring(0,s):t,e=n.match(i);return e?n.lastIndexOf(e[e.length-1]):-1},$.chain=function(t,i){return function(){var n=Array[s].slice.call(arguments,0);return n.unshift(function(){var i=Array[s].slice.call(arguments,0);return t.apply(this,i)}.bind(this)),i.apply(this,n)}};var n=$.chain;$.fn.videos=function(t){var i=this.find("video");switch(i=i.add(this.filter("video")),t){case"destroy":return i.each(function(t,i){i[e.i]&&(i[e.i].destroy(),delete i[e.i])}),i}return i.each(function(i,s){s[e.i]||new e($(s),t)}),i};var e=$.Video=function t(i,s){this.id=++t.s,this.el=i[0],this.$el=i,this.el[t.i]=this,this.options=this.n={},this.defaults(),this.setOptions(s),this.initialize()};i(e,{s:0,e:0,r:{},i:"player",a:["play","pause","timeupdate","finish"],removeEventsHandler:function(){var t=e.r;if(e.e)for(var i in t){var s=t[i],n=s.$el;s.forEach(function(t){e.a.forEach(function(t){n.off(t,e.o)})}),delete t[i],e.e--}},o:function(t,s){i(t,s);var n=e.r,r=t.currentTarget,a=t.currentTarget[e.i].id;if(a){var o=n[a];if(o&&o.length){var h=r[e.i];o.forEach(function(i){i.callback.call(h,t,i.n)})}}}}),i(e[s],{defaults:function(){},setOptions:function(t){i(this.n,t)},initialize:function(){},destroy:function(){delete this.el[e.i],this.id=null,this.el=null,this.$el=null},addEventsHandler:function(t,i){var s=e.r;if(t){var n=this.el;this.n.eventsHandler||(this.n.eventsHandler=!0,s[n[e.i].id]=[],s[n[e.i].id].$el=this.$el,e.a.forEach(function(t){this.$el.on(t,e.o)}.bind(this)),e.e++);for(var r=s[n[e.i].id],a=0,o=r.length;a<o;a++){var h=r[a];if(h.callback===t&&h.context===this)return}r.push({context:this,callback:t,options:i})}},removeEventsHandler:function(t){var i=this.el,s=e.r;if(this.n.eventsHandler&&e.e){var n=s[i[e.i].id];if(n&&n.length)if(t)for(var r=n.length-1;r>-1;r--){var a=n[r];if(a.context===this&&a.callback===t){n.splice(r,1),n.length||(e.a.forEach(function(t){this.$el.off(t,e.o)}.bind(this)),delete s[this.id],this.n.eventsHandler=!1,e.e--);break}}else n.forEach(function(t){e.a.forEach(function(t){this.$el.off(t,e.o)}.bind(this))}.bind(this)),delete s[this.id],this.n.eventsHandler=!1,e.e--}},destroy:n(e[s].destroy,function(t){this.removeEventsHandler(),t()})}),i(e[s],{defaults:n(e[s].defaults,function(t){this.setOptions({buffering:!0}),t()}),initialize:n(e[s].initialize,function(t){this.n.buffering&&this.buffering("start"),t()}),buffering:function(t,i){switch(t){case"start":this.h(i);break;case"stop":this.c(i)}return this},h:function(t){this.l=$("[for='"+this.$el.attr("id")+"'][kind=buffering]"),t=i({},this.n,t,{buffering:!0}),this.addEventsHandler(this.f,t)},f:function(t,i){switch(t.type){case"timeupdate":if(this.n.u){if(this.n.u===this.el.currentTime)if(this.n.d){if(Date.now()-this.n.d>1)return void this.l.addClass("buffering")}else this.n.d=Date.now()}else this.n.u=this.el.currentTime;default:this.l.removeClass("buffering"),this.n.u=this.el.currentTime}},c:function(t){this.l=null,this.removeEventsHandler(this.p,t)},destroy:n(e[s].destroy,function(t){this.c(),t()})}),i(t,{g:0}),i(t[s],{v:null,_:null,m:!1,b:!1,t:function(t){$.ajax({url:this.src,dataType:"text",success:function(i){this.k(i),this.y=!1,this.m=!0,t&&t(this)}.bind(this),error:function(i){this.y=i,this.m=!0,t&&t(this)}.bind(this)})},isReady:function(){return this.m&&!this.y},k:function(s){var n=s.indexOf("\r\n")>-1?"\r\n":"\n",e=s.split(n);this.v=[],this._=[];for(var r=[],a=0,o=e.length;a<o;a++){var h=e[a],c=a===e.length-1,l=!h;if(c&&!l&&r.push(h),(c||l)&&r.length){if(r[0].toLowerCase().indexOf("webvtt")>-1&&(r.splice(0,1),!r.length))continue;this.v.push({id:++t.g,title:"",start:null,end:null,placement:null,lines:r}),r=[]}else l||r.push(h)}this.v=this.v.filter(function(t){if(0!==t.lines[0].indexOf("NOTE")){if(0===t.lines[0].indexOf("STYLE"))return t.lines.splice(0,1),void this._.push(t.lines.join("\n"));if(-1===t.lines[0].indexOf("--\x3e")&&(t.title=t.lines[0],t.lines.shift()),-1===t.lines[0].indexOf("--\x3e"))throw"Error";return i(t,this.w(t.lines[0])),t.lines.shift(),!0}}.bind(this))},w:function(t){t=t.trim();var i=$.indexOfRegex(t,/-->/);if(-1===i)throw"Time declaration error, no --\x3e";var s=t.slice(0,i).trim();t=t.slice(i);var n=$.indexOfRegex(t,/[0-9]+/);if(-1===n)throw"Time declaration error, no end time";t=t.slice(n),-1===(i=$.indexOfRegex(t,/[ ]{1}/))&&(i=t.length);var e=t.slice(0,i).trim();return t=t.slice(i),{start:this.$(s),end:this.$(e),placement:this.x(t)}},z:[.001,1,60,360],$:function(t){var i=t.split(/[\:\.\,]{1}/g).reverse();if(i.length<3)throw"Time declaration error, mm:ss.ttt or hh:mm:ss.tt";for(var s=0,n=0,e=i.length;n<e;n++)s+=this.z[n]*parseInt(i[n]);return s},x:function(t){var i={line:-1,position:"50%",size:"100%",align:"middle"};t.split(" ").filter(function(t){return t}).forEach(function(t){var s=t.split(":"),n=s[1].split(","),e=s[0].toLowerCase();switch(e){case"d":e="vertical";break;case"l":e="line";break;case"t":e="position";break;case"s":e="size";break;case"a":e="align";break;case"vertical":case"line":case"position":case"size":case"align":break;default:throw"Bad position declaration, "+e}i[e]=n[0]||i[e]}),i.vertical="vertical"===i.vertical?"rl":"vertical-lr"===i.vertical?"lr":"horizontal";for(var s in i){var n=i[s];switch(s){case"line":n=String(n||-1);break;case"position":n=String(n||"0%");break;case"size":n=String(n||"100%");break;case"align":switch(n=String(n||"middle")){case"start":case"middle":case"end":break;default:throw"Invalid align declaration"}}}return i}}),i(e,{Lang:t}),i(e[s],{defaults:n(e[s].defaults,function(t){this.setOptions({captions:!1}),t()}),initialize:n(e[s].initialize,function(t){if(!this.n.captions)return t();this.captions("start",this.n),t()}),captions:function(t,i){switch(t){case"start":this.T(i);break;case"stop":this.E(i)}return this},captionLanguages:null,S:null,T:function(t){this.n.captions=!0,this.H=this.H.bind(this),this.R(this.B.bind(this)),this.D=$("[for='"+this.$el.attr("id")+"'][kind=captions],[for='"+this.$el.attr("id")+"'][kind=subtitles]"),this.D.on("click",this.H),t=i({},this.n,t,{captions:!0}),this.addEventsHandler(this.L,t)},H:function(){this.$el[0].paused?this.$el[0].play&&this.$el[0].play():this.$el[0].pause&&this.$el[0].pause()},B:function(t){this.captionLanguages=t,this.S=null;for(var i in t)if(this.captionLanguages[i].default){this.S=this.captionLanguages[i];break}},L:function(t,i){if(!t.realtime&&this.captionLanguages){var s=this.el.currentTime,n={},e=0;if(this.D.each(function(t,i){var s=$(i),r=s.attr("srclang");this.captionLanguages[r]&&(n[r]||(n[r]=[],e++),n[r].push(s))}.bind(this)),e)for(var r in n){var a=$(n[r]),o=this.captionLanguages[r],h=o.v.filter(function(t){return t.start<=s&&t.end>=s&&!t.live}),c=o.v.filter(function(t){return(t.start>s||t.end<s)&&t.live});if(0===h.length&&0===c.length)return;a.each(function(t,i){var s=$(i);h.forEach(function(t){t.live=!0,s.append($("<span>",this.I({id:t.id,lang:r,class:"cue"},t)).append($("<span>",{class:"cue-text",html:t.lines.join("<br>")})))}.bind(this)),c.forEach(function(t){t.live=!1,s.find("#"+t.id+".cue").remove()}),s.find(".cue:not([lang="+r+"])").remove()}.bind(this))}}},I:function(t,i){var s=t.class.split(" ");s.push(i.placement.vertical);var n="",e=i.placement;switch(e.vertical){case"horizontal":switch(e.align){case"start":s.push("align-left");break;case"middle":s.push("align-center");break;case"end":s.push("align-right")}n+="width:"+e.size+";",n+="left:"+e.position+";",(r=String(e.line).indexOf("%")>-1)||e.line>=0?(e.line,n+="top:"+e.line+"%"):n+="bottom:"+(100-100*Math.abs(e.line))+"%";break;case"rl":switch(e.align){case"start":s.push("align-top");break;case"middle":s.push("align-middle");break;case"end":s.push("align-bottom")}n+="height:"+e.size+";",n+="top:"+e.position+";",(r=String(e.line).indexOf("%")>-1)||e.line>=0?(e.line,n+="left:"+e.line+"%"):n+="right:"+(100-100*Math.abs(e.line))+"%";break;case"lr":switch(e.align){case"start":s.push("align-top");break;case"middle":s.push("align-middle");break;case"end":s.push("align-bottom")}n+="height:"+e.size+";",n+="top:"+e.position+";";var r=String(e.line).indexOf("%")>-1;r||e.line>=0?(e.line,n+="right:"+e.line+"%"):n+="left:"+(100-100*Math.abs(e.line))+"%"}return t.class=s.join(" "),t.style=n,t},E:function(t){this.n.captions=!1,this.D.html(""),this.M=null,this.D=null,t=i({},this.n,t,{captions:!1}),this.removeEventsHandler(this.L)},R:function(t){function i(i){i.isReady()?s++:(n--,delete r[i.lang]),s===n&&t&&t(r)}if("function"!=typeof t&&(t=null),this.captionLanguages)return t(this.captionLanguages);var s=0,n=0,r={};return this.$el.find("track[type='text/vtt']").each(function(t,s){var a=$(s),o=a.attr("srclang"),h=a.attr("src");if(o&&h){if(r[o])return;n++,r[o]=new e.Lang({default:void 0!==a.attr("default"),lang:o,src:h,label:a.attr("label")},i)}}).remove(),r},destroy:n(e[s].destroy,function(t){this.D.off("click",this.H),this.E(),t()})}),i($.fn,{play:function(){return this.videos().each(function(t,i){i.play()}),this},pause:function(){return this.videos().each(function(t,i){i.pause()}),this},mute:function(t){var i=void 0===t;return t=Boolean(t),this.videos().each(function(s,n){if(t||i&&!n.muted)return n.muted=!0,void(n.volume=0);n.muted=!1,n.volume=1}),this},loop:function(t){var i=void 0===t;return t=Boolean(t),this.videos().each(function(s,n){t||i&&!n.loop?n.loop=!0:n.loop=!1}),this}}),i(e[s],{defaults:n(e[s].defaults,function(t){this.setOptions({muted:Boolean(this.$el.attr("muted"))||!1,loop:Boolean(this.$el.attr("loop"))||!1,controls:!0}),t()}),initialize:n(e[s].initialize,function(t){this.$el.mute(this.n.muted),this.$el.loop(this.n.loop),this.Y=this.Y.bind(this),this.H=this.H.bind(this),this.n.controls&&this.controls("start"),t()}),controls:function(t,i){switch(t){case"start":this.A(i);break;case"stop":this.O(i)}return this},A:function(t){this.P=$("[for='"+this.$el.attr("id")+"'][kind=controls]"),this.P.on("click",this.Y),t=i({},this.n,t,{controls:!0}),this.addEventsHandler(this.p,t)},Y:function(t){var i=$(t.target);(i.is("[kind=controls]")||i.is(".play")||0!==i.parents(".play").length)&&this.H()},H:function(){this.$el[0].paused?this.$el[0].play&&this.$el[0].play():this.$el[0].pause&&this.$el[0].pause()},p:function(t,i){switch(t.type){case"play":this.P.removeClass("playing paused"),this.P.addClass("playing");break;case"pause":this.P.removeClass("playing paused"),this.P.addClass("paused")}},O:function(t){this.P.off("click",this.Y),this.P=null,this.removeEventsHandler(this.p,t)},destroy:n(e[s].destroy,function(t){this.O(),t()})}),i(e[s],{defaults:n(e[s].defaults,function(t){this.setOptions({poster:this.$el.attr("poster")||!1}),t()}),initialize:n(e[s].initialize,function(t){this.n.poster&&this.poster("start"),t()}),poster:function(t,i){switch(t){case"start":this.N(i);break;case"stop":this.U(i)}return this},N:function(t){this.X=$("[for='"+this.$el.attr("id")+"'][kind=poster]"),this.X.each(function(t,i){$(i).append($("<img>",{src:this.n.poster}))}.bind(this)),t=i({},this.n,t,{poster:!0}),this.addEventsHandler(this.j,t)},j:function(t,i){switch(t.type){case"play":this.X.removeClass("playing paused"),this.X.addClass("playing");break;case"pause":this.X.removeClass("playing paused"),this.X.addClass("paused")}var s=this.el.currentTime<=1,n=this.el.currentTime>=this.el.duration-1;this.X[s?"addClass":"removeClass"]("at-start"),this.X[n?"addClass":"removeClass"]("at-end"),this.X[s||n?"removeClass":"addClass"]("in-middle")},U:function(t){this.X=null,this.removeEventsHandler(this.p,t)},destroy:n(e[s].destroy,function(t){this.U(),t()})});var r=window.requestAnimationFrame;i(e,{q:[],C:0,F:62.5,G:function(t){t.n.J||(t.n.J=!0,e.q.push(t),r(e.K))},K:function(){if(e.q.length){var t=Date.now();if(t-e.C<e.F)return r(e.K);e.C=t,e.q.forEach(function(t){t.el.paused||t.$el.trigger("timeupdate",{realtime:!0})}),r(e.K)}},Q:function(t){if(t.n.J){t.n.J=!1;for(var i=e.q.length-1;i>-1;i--)if(e.q[i]===t)return void e.q.splice(i,1)}}}),i(e[s],{defaults:n(e[s].defaults,function(t){this.setOptions({realtime:!0}),t()}),initialize:n(e[s].initialize,function(t){if(!this.n.realtime)return t();this.realtime("start"),t()}),realtime:function(t){switch(t){case"start":this.V();break;case"stop":this.W()}return this},V:function(){this.addEventsHandler(this.Z),this.el.paused||e.G(this)},Z:function(t,i){switch(t.type){case"play":e.G(this);break;case"pause":case"finish":e.Q(this)}},W:function(){this.removeEventsHandler(this.Z),e.Q(this)},destroy:n(e[s].destroy,function(t){this.W(),t()})});})(jQuery);