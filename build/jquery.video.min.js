(function($){$("<style>",{text:""}).appendTo("head");var t={isTouchCapable:!1},s=function(t,i){setTimeout(t,i)},r=function(t){for(var i=1,n=arguments.length;i<n;i++){var s=arguments[i];for(var r in s)t[r]=s[r]}return t};t.isTouchCapable=!1;var i=function(){window.removeEventListener("touchstart",i),t.isTouchCapable=!0};window.addEventListener("touchstart",i);var e={t:null,listenTo:function(t,i,n){return t.on(i,n,this),this},listenToOnce:function(t,i,n){return t.once(i,n,this),this},stopListening:function(t,i,n){return t.off(i,n),this},on:function(t,i,n){switch(typeof t){case"string":var s=t.split(" ");if(1<s.length)return s.forEach(function(t){this.on(t,i,n)}.bind(this)),this;break;case"object":for(var r in t)this.on(r,t[r],n||i);return this}return this.t=this.t||{},this.t[t]=this.t[t]||[],this.t[t].push({subject:n||this,callback:i,once:!1}),this},once:function(t,i,n){switch(typeof t){case"string":var s=t.split(" ");if(1<s.length)return s.forEach(function(t){this.once(t,i,n)}.bind(this)),this;break;case"object":for(var r in t)this.on(r,t[r],n||i);return this}return this.t=this.t||{},this.t[t]=this.t[t]||[],this.t[t].push({subject:n||this,callback:i,once:!0}),this},off:function(t,i){switch(typeof t){case"string":var n=t.split(" ");if(1<n.length)return n.forEach(function(t){this.off(t,i)}.bind(this)),this;break;case"object":for(var s in t)this.off(s,t[s]);return this}if(!t)return this.t=null,this;if(!this.t)return this;if(!this.t[t])return this;for(var r=this.t[t].length-1;-1<r;r--)this.t[t][r].callback===i&&this.t[t].splice(0,r);return this.t[t].length||delete this.t[t],this},trigger:function(t){if(!t)return this;if(!this.t)return this;if(this.t[t]){for(var i,n=(i=arguments,1,Array.prototype.slice.call(i,1)),s=[],r=0,e=this.t[t].length;r<e;r++){var h=this.t[t][r];h.callback.apply(h.subject,n),h.once&&s.unshift(r)}for(r=0,e=s.length;r<e;r++)this.t[t].splice(s[r],1);this.t[t].length||delete this.t[t]}},destroy:function(){this.off()}},h=function(t){var i={};if(t.$set)for(var n in t.$set)i[n]=i[n]||{},i[n].set=t.$set[n];if(t.$get)for(var n in t.$set)i[n]=i[n]||{},i[n].get=t.$set[n];Object.defineProperties(t,i)},n=function(t,i){var n=t.constructor||function(){};return r(n.prototype,e,t||{}),r(n,e,i||{}),h(n.prototype),h(n),n},o=n({id:null,selector:null,el:null,options:null,domEvents:["loadstart","process","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","play","pause","ratechange","resize","volumechange"],constructor:function t(i,n){this.id=++t.i,this.n(i),this.options=n||{},this.s=this.s.bind(this),t.players.push(this),t.trigger("create",this),this.r(),s(function(){t.trigger("created",this)}.bind(this),1)},n:function(t){switch(typeof t){case"string":this.el=window.document.querySelector(t);break;case"object":this.el=t}this.selector=t,this.el[o.e]=this},r:function(){for(var t=0,i=this.domEvents.length;t<i;t++)this.el.addEventListener(this.domEvents[t],this.s)},s:function(t){this.trigger("*",t),this.trigger(t.type,t),o.trigger(t.type,this,t)},destroy:function(){o.trigger("destroy",this);for(var t=o.players.length-1;-1<t;t--)o.players[t]===this&&o.players.splice(t,1);this.h(),this.id=null,this.selector=null,this.el=null,this.options=null,s(function(){o.trigger("destroyed",this)}.bind(this),1)},h:function(){for(var t=0,i=this.domEvents.length;t<i;t++)this.el.removeEventListener(this.domEvents[t],this.s)}},{i:0,e:"player",players:[]});window.Video=o;var u=n({floorPrecision:10,constructor:function(){this.listenTo(o,{ended:this.onEnded,play:this.onPlay,pause:this.onPause})},onPlay:function(t){t.hasEnded=!1},onPause:function(t){this.isEnded(t)&&!t.hasEnded&&setTimeout(function(){t.el&&(t.hasEnded||this.isEnded(t)&&t.el.dispatchEvent(new Event("ended")))}.bind(this),150)},onEnded:function(t){t.hasEnded=!0},isEnded:function(t){return Math.abs(Math.floor(t.el.currentTime*this.floorPrecision)-Math.floor(t.el.duration*this.floorPrecision))<=1}});o.fixended=new u;var a=function(t){return window.requestAnimationFrame(t)},c=n({playing:null,interval:62.5,isRaf:!1,lastTickTime:null,constructor:function(){this.playing=[],this.listenTo(o,{play:this.onPlay,"pause finish destroyed":this.onPause}),this.onRaf=this.onRaf.bind(this)},onPlay:function(t){this.playing.push(t),this.inRaf||(a(this.onRaf),this.inRaf=!0)},onRaf:function(){if(Date.now()<this.lastTickTime+this.interval)return this.playing.length?a(this.onRaf):this.inRaf=!1;for(var t=0,i=this.playing.length;t<i;t++){var n=new Event("timeupdate");n.realtime=!0,this.playing[t].el.dispatchEvent(n)}return a(this.onRaf)},onPause:function(t){for(var i=0,n=this.playing.length;i<n;i++)this.playing[i].id===t.id&&this.playing.splice(i,1)}});o.realtime=new c,$&&$.fn&&($.fn.videos=function(n){var t=this.find("video");switch(t=t.add(this.filter("video")),n){case"destroy":return t.each(function(t,i){i[o.e]instanceof o&&(i[o.e].destroy(),delete i[o.e])}),t}return t.each(function(t,i){i[o.e]||new o(i,n)}),t});var f=n({o:null,elements:null,constructor:function(){this.o=[],this.elements={},this.listenTo(o,{created:this.u,destroyed:this.a}),this.refresh=this.refresh.bind(this),document.body?s(this.refresh,1):document.addEventListener("load",this.refresh)},u:function(t){this.o.push(t),this.refresh()},a:function(t){for(var i=0,n=this.o.length;i<n;i++)this.o[i].id===t.id&&this.o.splice(i,1);this.refresh()},refresh:function(){var t=this.c([document.body],"[for][kind]");t=this.f(t),this.elements=this.l(t)},c:function(t,i){for(var n=[],s=0,r=t.length;s<r;s++)for(var e=t[s].querySelectorAll(i),h=0,o=e.length;h<o;h++)n.push(e[h]);return n},f:function(t){var i=[],n=this.d();if(!n)return i;if(!t.length)return i;for(var s=0,r=t.length;s<r;s++){var e=t[s];n[e.getAttribute("for")]&&i.push(e)}return i},d:function(){for(var t={},i=0,n=this.o.length;i<n;i++)t[this.o[i].el.id]=!0;return this.o.length?t:null},l:function(t){for(var i={},n=0,s=t.length;n<s;n++){var r=t[n],e=r.getAttribute("for");i[e]=i[e]||{},r.getAttribute("kind").split(" ").forEach(function(t){i[e][t]=i[e][t]||[],i[e][t].push(r)})}return i}});o.dom=new f;var l=n({constructor:function(){this.listenTo(o,{create:this.onCreate})},onCreate:function(t){new d(t)}}),d=n({video:null,constructor:function(t){this.video=t,this.listenTo(t,{timeupdate:this.onTimeUpdate,destroy:this.destroy()})},onTimeUpdate:function(){var t=this.video.el.id;if(o.dom.elements[t]&&o.dom.elements[t].rail)for(var i=o.dom.elements[t].rail,n=0,s=i.length;n<s;n++){var r=i[n],e=this.video.el.currentTime/this.video.el.duration;r.style.width=100*e+"%"}}});o.rail=new l,h=function(t){var i={};if(t.$set)for(var n in t.$set)i[n]=i[n]||{},i[n].set=t.$set[n];if(t.$get)for(var n in t.$set)i[n]=i[n]||{},i[n].get=t.$set[n];Object.defineProperties(t,i)};})(jQuery);